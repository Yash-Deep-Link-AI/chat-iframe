window.onload = function () {
  let e = document.getElementById("botScript"),
    t =
      '\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0_1401_2)">\n<path d="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H6L4 18V4H20V16Z" fill="white"/>\n</g>\n<defs>\n<clipPath id="clip0_1401_2">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>\n</svg>\n\n',
    n = document.createElement("div");
  n.setAttribute("id", "bubble-button"),
    (n.style.position = "fixed"),
    (n.style.bottom = "20px"),
    (n.style.right = "20px"),
    (n.style.width = "50px"),
    (n.style.height = "50px"),
    (n.style.borderRadius = "25px"),
    (n.style.backgroundColor = "black"),
    (n.style.boxShadow = "0 4px 8px 0 rgba(0, 0, 0, 0.2)"),
    (n.style.cursor = "pointer"),
    (n.style.zIndex = 999999999),
    (n.style.transition = "all .2s ease-in-out"),
    n.addEventListener("mouseenter", (e) => {
      n.style.transform = "scale(1.05)";
    }),
    n.addEventListener("mouseleave", (e) => {
      n.style.transform = "scale(1)";
    });
  let s = document.createElement("div");
  (s.style.display = "flex"),
    (s.style.alignItems = "center"),
    (s.style.justifyContent = "center"),
    (s.style.width = "100%"),
    (s.style.height = "100%"),
    (s.style.zIndex = 999999999),
    (s.innerHTML = t),
    n.appendChild(s),
    n.addEventListener("click", () => {
      "none" === l.style.display
        ? ((l.style.display = "flex"),
          (s.innerHTML =
            '\n<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="#FFFFFF" width="24" height="24">\n  <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />\n</svg>\n'))
        : ((l.style.display = "none"), (s.innerHTML = t));
    });
  let l = document.createElement("div");
  l.setAttribute("id", "bubble-window"),
    (l.style.position = "fixed"),
    (l.style.flexDirection = "column"),
    (l.style.justifyContent = "space-between"),
    (l.style.bottom = "80px"),
    (l.style.right = "20px"),
    (l.style.width = "85vw"),
    (l.style.height = "70vh"),
    (l.style.boxShadow =
      "rgba(150, 150, 150, 0.15) 0px 6px 24px 0px, rgba(150, 150, 150, 0.15) 0px 0px 0px 1px"),
    (l.style.display = "none"),
    (l.style.borderRadius = "10px"),
    (l.style.zIndex = 999999999),
    (l.style.overflow = "hidden"),
    document.body.appendChild(l),
    (l.innerHTML = `<iframe
src="https://www.deeplink.ai/#/chat-iframe?botId=${e.getAttribute("botid")}&customerId=${e.getAttribute("customerid")}"
width="100%"
height="100%"
frameborder="0"
></iframe>`);
  let i = window.matchMedia("(min-width: 550px)");
  function o(e) {
    e.matches && ((l.style.height = "600px"), (l.style.width = "400px"));
  }
  i.addEventListener("change", o), o(i);
  let $ = async () => {
    (n.style.backgroundColor = s.color || "#8e44ad"),
      document.body.appendChild(n);
  };
  $();
};
